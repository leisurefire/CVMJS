/* Global style + shared utilities
   - 保留原有导入顺序：Town/Compose/Store（保持兼容）
   - 将通用变量、重置、辅助类放在此处，减少重复并提升可维护性
*/

@import "Animations.css";
@import "Town.css";
@import "Compose.css";
@import "Store.css";


:root {
  --main_color: #DC704C;
  --main_color_32: rgb(220, 112, 76);
  --main_color_48: rgba(220, 112, 76, .48);
  --main_color_background: rgb(245,222,215);
  --background: rgb(250,241,244);
  --shadow: rgba(0, 0, 0, .32) 0 0.5rem 1rem;
  --outline: #53433f;
  --outline_48: rgba(83, 67, 63, .48);
  --outline_background: rgb(255,219,208);
    --box_radius_huge: 2rem;
    --card_radius: 2rem;
  --radius: 1rem;
  --radius-md: 0.75rem;
  --radius-sm: 0.5rem;
  --glass_bg: rgba(0,0,0,.48);
  --glass_backdrop: blur(20px) saturate(200%);
  --window_width: 100vw;
  --window_height: 100vh;
}

/* Common UI surface: glass-like panels used across town/store overlays */
#town #store #storeBox,
#town #store #storeTips,
#town #store #navbar,
#town #coinBar,
#town .dungeon,
#town #store #storeBox div {
  background-color: var(--glass_bg);
  backdrop-filter: var(--glass_backdrop);
  border-radius: var(--card_radius);
}

/* Small utility helpers */
.u-shadow { box-shadow: var(--shadow); }
.u-round { border-radius: var(--card_radius); }
.u-glass { background-color: var(--glass_bg); backdrop-filter: var(--glass_backdrop); }


/* Base typography & resets */
html { font-size: 16px; touch-action: manipulation; font-family: PingFang SC, "HarmonyOS Sans SC", "Helvetica Neue", "Microsoft YaHei", sans-serif; }

* { box-sizing: border-box; }

body { margin: 0; height: 100%; width: 100%; overflow: hidden; background-color: black; user-select: none; transform-origin: left top; }

h2 { font-size: 1.5rem; }
p  { font-size: 1rem; }

/* Hide native scrollbars where used intentionally */
*::-webkit-scrollbar {
  display: none; /* 对 WebKit 浏览器生效，例如 Chrome、Edge、Safari */
}

* {
  scrollbar-width: none; /* 隐藏滚动条 */
}

/* Common element defaults */
canvas { z-index: 99; top: 0; left: 0; position: fixed; }
button { border: none; padding: 0.75rem 1.5rem; overflow: hidden; cursor: pointer; }
img { display: inline-block; vertical-align: middle; margin: 0; padding: 0; border: none; }

/* Loader / connecting */
#loader { z-index: 99999; margin: 0; position: absolute; height: var(--window_height); width: var(--window_width); }

#connecting { display: none; z-index: 99998; position: fixed; inset: 0; width: var(--window_width); height: var(--window_height); background-color: rgba(0,0,0,.72); }
#connecting p { text-align: center; color: #fff; margin-top: 25rem; }
#connecting div { content: ''; display: block; width: 3.375rem; height: 3.375rem; border-radius: 50%; position: absolute; top: calc(50% - 1.6875rem); background-color: #fff; animation: connecting 3s infinite cubic-bezier(0.4, 0, 0.2, 1); } #connecting div:nth-child(2) { opacity: 0.9; animation-delay: .1s; filter: blur(0.0625rem); } #connecting div:nth-child(3) { transition: height .24s cubic-bezier(0.4, 0, 0.2, 1), width .12s cubic-bezier(0.4, 0, 0.2, 1); opacity: 0.8; animation-delay: .2s; filter: blur(0.125rem); } #connecting div:nth-child(4) { opacity: 0.7; animation-delay: .3s; filter: blur(0.1875rem); } #connecting div:nth-child(5) { opacity: 0.6; animation-delay: .4s; filter: blur(0.25rem); } #connecting div:nth-child(6) { opacity: 0.5; animation-delay: .5s; filter: blur(0.3125rem); }
#connecting div:nth-child(2) { opacity: 0.9; animation-delay: .1s; filter: blur(1px); }
#connecting div:nth-child(3) { transition: height .24s cubic-bezier(0.4, 0, 0.2, 1), width .12s cubic-bezier(0.4, 0, 0.2, 1); opacity: 0.8; animation-delay: .2s; filter: blur(2px); }
#connecting div:nth-child(4) { opacity: 0.7; animation-delay: .3s; filter: blur(3px); }
#connecting div:nth-child(5) { opacity: 0.6; animation-delay: .4s; filter: blur(4px); }
#connecting div:nth-child(6) { opacity: 0.5; animation-delay: .5s; filter: blur(5px); }

/* Achievement / overlay / utilities */
.achievement { z-index: 99999; pointer-events: none; position: absolute; height: 3.375rem; width: 10rem; overflow: hidden; background-color: #390b00; background-image: url("../images/interface/achievement/default.png"); background-size: 2rem 2rem; background-position: 1.6875rem center; background-repeat: no-repeat; box-shadow: rgba(0,0,0,.12) 0 0 1rem; left: 43.75rem; top: 56.25rem; padding-left: 5.25rem; border-radius: 1.6875rem; animation: achievement forwards 5s; transition: all 1s; }
.achievement:after { content: ""; position: absolute; height: 3.375rem; width: 17.5rem; bottom: 20rem; background-size: contain; background-repeat: no-repeat; padding-left: 5.25rem; }
.achievement p { color: #fff; }

/* Generic overlay used by multiple screens (keep lightweight) */
.overlay { z-index: -1; width: var(--window_width); height: var(--window_height); top: 0; left: 0; margin: 0; display: block; position: fixed; animation: none; }

material-description { z-index: 99; position: fixed; bottom: 2rem; right: 2rem; }

game-battlefield { position: fixed; overflow: hidden; margin: 0; width: var(--window_width); height: var(--window_height); }

/* Shared screen layout used by town modal screens (store/compose/rogue-like) */
#town #store,
#town #compose,
#town #rouge-like {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 10;
  display: none;
  margin: auto;
  width: var(--window_width);
  height: var(--window_height);
  text-align: left;
  transition: all .32s cubic-bezier(0.4, 0, 0.2, 1);
  animation: townBoxIn 0.32s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Shared small effects & helpers */
.description {
  position: fixed;
  z-index: 9999;
  padding: 1rem;
  max-width: 16rem;
  border-radius: 1rem;
  background-color: var(--background);
  box-shadow: var(--shadow);
  color: var(--outline);
  text-align: left;
  font-size: 1rem;
  transform-origin: top left;
  animation: desDisplay 0.24s forwards cubic-bezier(0.4, 0, 0.2, 1);
  pointer-events: none;
}
.description h1 { padding: 0 0 0.5rem; margin: 0; width: 100%; text-align: center; font-size: 1rem; }
.description div { display: grid; grid-template-columns: repeat(4, 1fr); column-gap: 0.375rem; padding: 0; margin: 0.25rem; }
.description a { display: inline-block; padding: 0.5rem; min-width: 2.5rem; border-radius: 0.5rem; background-color: var(--main_color_background); color: var(--outline); text-align: center; font-size: 81%; }
.description svg{ fill: var(--outline); position: relative; left: 50%; transform: translateX(-50%); display: block; margin-bottom: 0.5rem; }
.description li{ display: flex; gap: 0.5rem; }
.description li *:nth-child(n + 2){ flex-grow: 1; }
.description span { text-align: left; overflow: hidden; text-overflow: ellipsis; min-width: 4rem; }

/* reuse rope style across files */
.rope { position: absolute; top: -2px; width: 4px; height: 0; border: rgba(0,0,0,0.8) solid 1px; background-image: linear-gradient(to left, #F1B152, #452121); border-radius: 1px; }

/* keep keyframes references — actual @keyframes moved to Animations.css to avoid duplication */

/* Common transition & interaction rules for interactive UI surfaces */
#town .dungeon,
#town #coinBar,
#town #store #storeBox div,
#town #store #navbar,
#town #store #storeTips,
#town #compose #CBag img,
#town material-icon-button {
  transition: all .32s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Make glass-like surfaces consistent (fallback for components that didn't use var) */
#town #coinBar,
#town #store #storeBox,
#town #store #storeTips,
#town #store #navbar,
#town .dungeon,
#town .dungeon_flip {
  background-color: var(--glass_bg);
  backdrop-filter: var(--glass_backdrop);
  border-radius: var(--card_radius);
}



